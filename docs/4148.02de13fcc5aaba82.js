"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[4148],{4148:(Q,h,l)=>{l.r(h),l.d(h,{PaginationPopupModule:()=>K});var g=l(177),D=l(2796),c=l(9280),f=l(563),x=l(320),I=l(1626),P=l(1830),b=l(1141),m=l(9417),j=l(6781),C=l(9998),v=l(4714),N=l(2242),F=l(1305),T=l(8150),R=l(494),y=l(7480),_=l(5779),k=l(5836),t=l(4438),w=l(3806);const B=["dt"],u=()=>({width:"450px"}),V=i=>({"ng-invalid ng-dirty":i});function G(i,r){1&i&&t.nrm(0,"pre-loading")}function S(i,r){if(1&i){const n=t.RV6();t.j41(0,"div",16)(1,"button",17),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.toggleNew())}),t.k0s(),t.j41(2,"button",18),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.deleteSelectedProducts())}),t.k0s()()}if(2&i){const n=t.XpG();t.R7$(2),t.Y8G("disabled",!n.selectedItems||!n.selectedItems.length)}}function E(i,r){if(1&i){const n=t.RV6();t.j41(0,"button",19),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.exportCSV())}),t.k0s()}}function M(i,r){if(1&i){const n=t.RV6();t.j41(0,"div",20)(1,"label",21),t.EFF(2,"Name"),t.k0s(),t.j41(3,"input",22),t.mxI("ngModelChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.newName,e)||(a.newName=e),t.Njj(e)}),t.k0s()(),t.j41(4,"div",20)(5,"label",23),t.EFF(6,"Notes"),t.k0s(),t.j41(7,"textarea",24),t.mxI("ngModelChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.newNotes,e)||(a.newNotes=e),t.Njj(e)}),t.k0s()(),t.j41(8,"div",20)(9,"button",25),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.addNew())}),t.k0s()()}if(2&i){const n=t.XpG();t.R7$(3),t.R50("ngModel",n.newName),t.R7$(4),t.R50("ngModel",n.newNotes)}}function X(i,r){if(1&i){const n=t.RV6();t.j41(0,"div",26)(1,"h5",27),t.EFF(2,"Manage Items"),t.k0s(),t.j41(3,"span",28),t.nrm(4,"i",29),t.j41(5,"input",30),t.mxI("ngModelChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.nameFilter,e)||(a.nameFilter=e),t.Njj(e)}),t.bIt("input",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.loadFilteredData())}),t.k0s()()()}if(2&i){const n=t.XpG();t.R7$(5),t.R50("ngModel",n.nameFilter)}}function O(i,r){if(1&i){const n=t.RV6();t.j41(0,"tr")(1,"th",31),t.nrm(2,"p-tableHeaderCheckbox"),t.k0s(),t.j41(3,"th",32),t.bIt("click",function(e){t.eBV(n);const a=t.XpG();return t.Njj(a.sortById(e))}),t.EFF(4," Id "),t.nrm(5,"p-sortIcon",33),t.k0s(),t.j41(6,"th",34),t.bIt("click",function(e){t.eBV(n);const a=t.XpG();return t.Njj(a.sortByName(e))}),t.EFF(7," Name "),t.nrm(8,"p-sortIcon",35),t.k0s(),t.j41(9,"th"),t.EFF(10,"Notes"),t.k0s(),t.j41(11,"th"),t.EFF(12,"Actions"),t.k0s()()}}function Y(i,r){if(1&i){const n=t.RV6();t.j41(0,"tr")(1,"td"),t.nrm(2,"p-tableCheckbox",36),t.k0s(),t.j41(3,"td")(4,"span",37),t.EFF(5,"Id"),t.k0s(),t.EFF(6),t.k0s(),t.j41(7,"td")(8,"span",37),t.EFF(9,"Name"),t.k0s(),t.EFF(10),t.k0s(),t.j41(11,"td")(12,"span",37),t.EFF(13,"Notes"),t.k0s(),t.EFF(14),t.k0s(),t.j41(15,"td")(16,"div",38)(17,"button",39),t.bIt("click",function(){const e=t.eBV(n).$implicit,a=t.XpG();return t.Njj(a.editProduct(e))}),t.k0s(),t.j41(18,"button",40),t.bIt("click",function(){const e=t.eBV(n).$implicit,a=t.XpG();return t.Njj(a.deleteProduct(e))}),t.k0s()()()()}if(2&i){const n=r.$implicit;t.R7$(2),t.Y8G("value",n),t.R7$(4),t.SpI(" ",n.id,""),t.R7$(4),t.SpI(" ",n.name,""),t.R7$(4),t.SpI(" ",n.notes," ")}}function H(i,r){1&i&&(t.j41(0,"small",46),t.EFF(1,"Name is required."),t.k0s())}function A(i,r){if(1&i){const n=t.RV6();t.j41(0,"div",20)(1,"label",41),t.EFF(2,"Name"),t.k0s(),t.j41(3,"input",42),t.mxI("ngModelChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.product.name,e)||(a.product.name=e),t.Njj(e)}),t.k0s(),t.DNE(4,H,2,0,"small",43),t.k0s(),t.j41(5,"div",20)(6,"label",44),t.EFF(7,"Notes"),t.k0s(),t.j41(8,"textarea",45),t.mxI("ngModelChange",function(e){t.eBV(n);const a=t.XpG();return t.DH7(a.product.notes,e)||(a.product.notes=e),t.Njj(e)}),t.k0s()()}if(2&i){const n=t.XpG();t.R7$(3),t.R50("ngModel",n.product.name),t.Y8G("ngClass",t.eq3(4,V,n.submitted&&!n.product.name)),t.R7$(),t.Y8G("ngIf",n.submitted&&!n.product.name),t.R7$(4),t.R50("ngModel",n.product.notes)}}function z(i,r){if(1&i){const n=t.RV6();t.j41(0,"button",47),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.hideDialog())}),t.k0s(),t.j41(1,"button",48),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.saveProduct(e.product.id,e.product))}),t.k0s()}}function L(i,r){if(1&i&&(t.j41(0,"span"),t.EFF(1,"Are you sure you want to delete "),t.j41(2,"b"),t.EFF(3),t.k0s(),t.EFF(4,"?"),t.k0s()),2&i){const n=t.XpG();t.R7$(3),t.JRh(n.product.name)}}function U(i,r){if(1&i){const n=t.RV6();t.j41(0,"button",49),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.deleteProductDialog=!1)}),t.k0s(),t.j41(1,"button",50),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.confirmDelete(e.product.id))}),t.k0s()}}function J(i,r){if(1&i){const n=t.RV6();t.j41(0,"button",49),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.deleteProductsDialog=!1)}),t.k0s(),t.j41(1,"button",50),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.confirmDeleteSelected())}),t.k0s()}}let $=(()=>{class i{constructor(n,o){this._PaginationService=n,this.messageService=o,this.allData=[],this.page=1,this.itemsPerPage=3,this.selectedItems=[],this.cols=[],this.loading=!0,this.nameFilter="",this.deleteProductDialog=!1,this.deleteProductsDialog=!1,this.submitted=!1,this.productDialog=!1,this.showFormNew=!1,this.sortField="id",this.sortOrder="asc"}ngOnInit(){this.endPoint="Department",this.cols=[{field:"name",header:"Name"},{field:"notes",header:"Notes"}]}editProduct(n){this.product={...n},this.productDialog=!0}confirmDelete(n){this._PaginationService.DeleteSoftById(n).subscribe({next:()=>{this.deleteProductDialog=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"Product Deleted",life:3e3})},error:o=>{console.log(o)}})}addNew(){this._PaginationService.Register({name:this.newName,notes:this.newNotes}).subscribe({next:o=>{console.log(o),this.showFormNew=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"inserted success",life:3e3}),this.setFieldsNulls(),this.loadData(this.page,this.itemsPerPage,this.nameFilter,this.sortField,this.sortOrder)},error:o=>{this.showFormNew=!1,console.log(o)}})}loadFilteredData(){this.loadData(1,this.itemsPerPage,this.nameFilter,this.sortField,this.sortOrder)}setFieldsNulls(){this.newName=null,this.newNotes=null}loadData(n,o,e,a,p){this.loading=!0;let s={pageNumber:n,pageSize:o,filterValue:e,filterType:a,sortType:p};s.sortType=this.sortOrder,this._PaginationService.GetPage(s).subscribe({next:d=>{console.log(d),this.allData=d.data,console.log(d.data),this.totalItems=d.totalItems,this.loading=!1,console.log(this.selectedItems)},error:d=>{console.log(d),this.loading=!1}})}onPageChange(n){let o;console.log(n),this.page=Number(n.first/n.rows)+1,o=1===n.sortOrder?"asc":"dsc",this.sortOrder=o,this.itemsPerPage=n.rows,this.loadData(this.page,this.itemsPerPage,this.nameFilter,this.sortField,this.sortOrder)}deleteSelectedProducts(){this.deleteProductsDialog=!0}hideDialog(){this.productDialog=!1,this.submitted=!1}deleteProduct(n){this.deleteProductDialog=!0,this.product={...n}}saveProduct(n,o){this.submitted=!0,console.log(n),console.log(o),this._PaginationService.Edit({id:o.id,name:o.name,notes:o.notes}).subscribe({next:()=>{this.hideDialog(),this.messageService.add({severity:"success",summary:"Successful",detail:"You Edit This Item",life:3e3}),this.loadData(this.page,this.itemsPerPage,this.nameFilter,this.sortField,this.sortOrder)},error:a=>{console.log(a)}})}toggleNew(){this.showFormNew=!this.showFormNew}exportCSV(){const e="\ufeff"+this.convertToCSV(this.selectedItems),a=new Blob([e],{type:"text/csv;charset=utf-8;"}),p=document.createElement("a");p.href=URL.createObjectURL(a),p.download="data_export_"+(new Date).getTime()+".csv",p.click()}convertToCSV(n){if(!n||!n.length)return"";let e=[];this.cols.forEach(p=>{e.push(p.field)}),console.log(e);const a=n.map(p=>e.map(s=>`"${p[s]}"`).join(","));return a.unshift(e.join(",")),a.join("\r\n")}confirmDeleteSelected(){let n=[];console.log("Selected Items :"),this.selectedItems.forEach(o=>{n.push(o.id)}),this._PaginationService.DeleteRangeSoft(n).subscribe({next:o=>{this.deleteProductsDialog=!1,this.messageService.add({severity:"success",summary:"Success",detail:"items deleted successfully",life:3e3}),this.loadData(this.page,this.itemsPerPage,this.nameFilter,this.sortField,this.sortOrder)},error:o=>{this.deleteProductsDialog=!1,this.loadData(this.page,this.itemsPerPage,this.nameFilter,this.sortField,this.sortOrder)}})}sortById(n){this.sortField="id","asc"===this.sortOrder?this.sortOrder="dsc":"dsc"===this.sortOrder&&(this.sortOrder="asc")}sortByName(n){this.sortField="name"}static{this.\u0275fac=function(o){return new(o||i)(t.rXU(w.m),t.rXU(_.bg))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-pagination-popup"]],viewQuery:function(o,e){if(1&o&&t.GBs(B,5),2&o){let a;t.mGM(a=t.lsd())&&(e.dt=a.first)}},decls:26,vars:30,consts:[["dt",""],[4,"ngIf"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["header","Add New",1,"p-fluid",3,"visibleChange","visible","modal"],["pTemplate","content"],["selectionMode","multiple","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","dataKey","id",3,"selectionChange","onLazyLoad","value","paginator","rows","columns","totalRecords","selection","showCurrentPageReport","lazy"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Product Details",1,"p-fluid",3,"visibleChange","visible","modal"],["pTemplate","footer"],["header","Confirm",3,"visibleChange","visible","modal"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[1,"my-2"],["pButton","","pRipple","","label","Add New","icon","pi pi-plus",1,"p-button-info","mx-2","px-5",3,"click"],["pButton","","pRipple","","label","Delete","icon","pi pi-trash",1,"p-button-danger","mx-2","px-5",3,"click","disabled"],["pButton","","pRipple","","label","Export","icon","pi pi-upload","pTooltip","CSV",1,"p-button-help","mx-2","px-5",3,"click"],[1,"field"],["htmlFor","new-name"],["pInputText","","placeholder","Enter Name Here","id","new-name","type","text",3,"ngModelChange","ngModel"],["htmlFor","new-notes"],["pInputTextarea","","id","new-notes","placeholder","Enter Notes Here","type","text",3,"ngModelChange","ngModel"],["pButton","","label","Insert New",1,"w-25",3,"click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","id","filter-name","type","text","placeholder","Search...",1,"w-full","sm:w-auto",3,"ngModelChange","input","ngModel"],[2,"width","3rem"],["pSortableColumn","id",3,"click"],["field","id"],["pSortableColumn","name",3,"click"],["field","name"],[3,"value"],[1,"p-column-title"],[1,"flex","crud-operations"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-info","p-button-outlined","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-outlined","p-button-danger",3,"click"],["for","name"],["type","text","pInputText","","id","name","required","","autofocus","",3,"ngModelChange","ngModel","ngClass"],["class","ng-dirty ng-invalid",4,"ngIf"],["for","notes"],["id","notes","pInputTextarea","","required","","rows","3","cols","20",3,"ngModelChange","ngModel"],[1,"ng-dirty","ng-invalid"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Yes",1,"p-button-text",3,"click"]],template:function(o,e){if(1&o){const a=t.RV6();t.nrm(0,"p-toast"),t.DNE(1,G,1,0,"pre-loading",1),t.j41(2,"p-toolbar",2),t.DNE(3,S,3,1,"ng-template",3)(4,E,1,0,"ng-template",4),t.k0s(),t.j41(5,"p-dialog",5),t.mxI("visibleChange",function(s){return t.eBV(a),t.DH7(e.showFormNew,s)||(e.showFormNew=s),t.Njj(s)}),t.DNE(6,M,10,2,"ng-template",6),t.k0s(),t.j41(7,"p-table",7,0),t.mxI("selectionChange",function(s){return t.eBV(a),t.DH7(e.selectedItems,s)||(e.selectedItems=s),t.Njj(s)}),t.bIt("onLazyLoad",function(s){return t.eBV(a),t.Njj(e.onPageChange(s))}),t.DNE(9,X,6,1,"ng-template",8)(10,O,13,0,"ng-template",9)(11,Y,19,4,"ng-template",10),t.k0s(),t.j41(12,"p-dialog",11),t.mxI("visibleChange",function(s){return t.eBV(a),t.DH7(e.productDialog,s)||(e.productDialog=s),t.Njj(s)}),t.DNE(13,A,9,6,"ng-template",6)(14,z,2,0,"ng-template",12),t.k0s(),t.j41(15,"p-dialog",13),t.mxI("visibleChange",function(s){return t.eBV(a),t.DH7(e.deleteProductDialog,s)||(e.deleteProductDialog=s),t.Njj(s)}),t.j41(16,"div",14),t.nrm(17,"i",15),t.DNE(18,L,5,1,"span",1),t.k0s(),t.DNE(19,U,2,0,"ng-template",12),t.k0s(),t.j41(20,"p-dialog",13),t.mxI("visibleChange",function(s){return t.eBV(a),t.DH7(e.deleteProductsDialog,s)||(e.deleteProductsDialog=s),t.Njj(s)}),t.j41(21,"div",14),t.nrm(22,"i",15),t.j41(23,"span"),t.EFF(24,"Are you sure you want to delete selected products?"),t.k0s()(),t.DNE(25,J,2,0,"ng-template",12),t.k0s()}2&o&&(t.R7$(),t.Y8G("ngIf",e.loading),t.R7$(4),t.Aen(t.lJ4(26,u)),t.R50("visible",e.showFormNew),t.Y8G("modal",!0),t.R7$(2),t.Y8G("value",e.allData)("paginator",!0)("rows",e.itemsPerPage)("columns",e.cols)("totalRecords",e.totalItems),t.R50("selection",e.selectedItems),t.Y8G("showCurrentPageReport",!0)("lazy",!0),t.R7$(5),t.Aen(t.lJ4(27,u)),t.R50("visible",e.productDialog),t.Y8G("modal",!0),t.R7$(3),t.Aen(t.lJ4(28,u)),t.R50("visible",e.deleteProductDialog),t.Y8G("modal",!0),t.R7$(3),t.Y8G("ngIf",e.product),t.R7$(2),t.Aen(t.lJ4(29,u)),t.R50("visible",e.deleteProductsDialog),t.Y8G("modal",!0))},dependencies:[g.YU,g.bT,P.M,c.XI,_.Ei,c.Tg,c.yc,c.S9,c.nA,f.n,b._f,m.me,m.BC,m.YS,m.vS,j.l,C.y8,N.S,F.Z],styles:[".w-25[_ngcontent-%COMP%]{width:25%!important}textarea[_ngcontent-%COMP%]{resize:none}"]})}}return i})(),Z=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[k.iI.forChild([{path:"",component:$}]),k.iI]})}}return i})(),K=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({providers:[_.bg],imports:[Z,g.MD,D.ed,P.m,c.bG,f.Z,x.e,I.q1,b.tm,m.YN,j.P,C.MB,v.wZ,N.u,F.f,T.kr,R.Ko,y.O3,m.X1]})}}return i})()}}]);